/*!
 * Purpose: this simple framework manages all eWallie Pay AJAX Requests
 * Version Release: 1.0
 * Created Date: September 24, 2021
 * Author(s):Enoch C. Jallah
 * Contact Mail: enochcjallah@gmail.com
 * Dependency: jQuery 
*/
function Alert(t,e,i=null){this.alertContainer=$(".eWalliePay-form").find(".eAlert-container"),console.log(alertContainer),this.alertType=t,this.strongContent=null==i?"":i,this.alertMessage=e,this.dismissable=`<button type="button" class="btn text-${this.alertType} close" data-dismiss="alert" aria-label="Close">\n\t\t\t\t\t\t\t<span aria-hidden="true" style="font-size: 1.5em;">&times;</span>\n\t\t\t\t\t\t</button>`,this.alertContainer.html(`\n\t\t<div style="width: 100%">\n\t\t\t<div class="row alert-container">\n\t\t\t\t<div style="width: 100%; display: flex;" class="alert alert-${this.alertType} alert-dismissable fade show" role="alert">\n\t\t\t\t\t<div style="flex: 1; font-size: 1em !important;">\n\t\t\t\t\t\t<strong>${this.strongContent}</strong>\n\t\t\t\t\t\t${this.alertMessage}\n\t\t\t\t\t</div>\n\t\t\t\t</div>                        \n\t\t\t</div>\n\t\t</div>`).hide(0).slideDown(250)}function HideAlert(){$(".eWalliePay-form").find(".eAlert-container").slideUp(250,(function(){$(this).html("")}))}function ChangeButtonState(t,e="Processing"){let i=$(t),l=i.html();i.attr("data-oldtext",l),i.attr("disabled","disabled").html(`<span>${e}&nbsp;<i class="fad fa-md fa-spinner-third fa-spin"></i></span>`)}function RestoreButtonState(t){let e=$(t),i=e.attr("data-oldtext");e.removeAttr("disabled").html(i)}function isJSON(t){if("string"!=typeof t)return!1;try{t=JSON.parse(t)}catch(t){return!1}return"object"==typeof t&&null!==t}jQuery((function(t){t("body").on("keyup"," #ewallie-user-identity",(function(){let e=t("body").find(".eWalliePay-form #confirm-ewallie-id")[0],i=t("body").find(".eWalliePay-form .code-container"),l=t("body").find(".eWalliePay-form #ewallie-curl"),a=this.value.trim();this.dataset.current!==a&&(i.slideUp(250,(function(){this.apprInput="",this.removeAttribute("required")})),l.val(""),l.removeAttr("required")),""!=a?"none"===e.style.display&&t(e).show(250):t(e).hide(250),this.setAttribute("data-current",a)})),t("body").on("click",".eWalliePay-form #confirm-ewallie-id",(function(){let e,i=t("body").find(".eWalliePay-form #ewallie-user-identity").val().trim();HideAlert(),""!=i?t.ajax({type:"POST",url:"/wp-content/plugins/eWalliePay/api",data:JSON.stringify({"create-order":{key_x:eWallieKeys.keyX,key_y:eWallieKeys.keyY,key_z:eWallieKeys.keyZ,user_identity:i,amount:eWallieKeys.total,currency:eWallieKeys.currency}}),contentType:"application/json",beforeSend:()=>{ChangeButtonState(this)}}).done(e=>{if(RestoreButtonState(this),200==e.status){let i=document.querySelector(".eWalliePay-form .code-container"),l=document.querySelector(".eWalliePay-form #ewallie-approval-code"),a;document.querySelector(".eWalliePay-form #ewallie-curl").value=e.response_body,t(i).slideDown(250,()=>{t(this).slideUp(250),l.setAttribute("required","required")})}else Alert("danger",e.message)}):Alert("danger","No eWallie Username/User ID provided")}))}));